<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns:f="sap.f" xmlns:variants="sap.ui.comp.variants" xmlns="sap.m" xmlns:filterbar="sap.ui.comp.filterbar" xmlns:core="sap.ui.core" controllerName="ca.toyota.demoreservation.demoreservation.controller.Reservation">
    <f:DynamicPage headerExpanded="true" showFooter="false" class="sapUiSizeCompact">
        <f:header>
            <f:DynamicPageHeader pinnable="false">
                 <f:content>
                     <Button icon="sap-icon://home" type="Transparent" press="onNavButtonPress"/>
                 	
                    <filterbar:FilterBar id="ListReportFilterBar" useToolbar="false" showGoOnFB="true" searchEnabled="true" search="onSearch">
                        <filterbar:filterItems>
                            <filterbar:FilterItem label="Request Status" name="Fiori_ListReport_ListReport_0-filterBars-Fiori_ListReport_FilterBar-1-filters-sap_ui_comp_filterbar_FilterItem-1537538709735---0">
                                <filterbar:control>
  									<ComboBox id="inpStatus" change="onSelectChange" items="{path: 'vehicles>/FilterData/RequestStatus'}" placeholder="Select Status">
										<core:Item key="{vehicles>key}" text="{vehicles>name}"/>
									</ComboBox>
                                </filterbar:control>
                            </filterbar:FilterItem>
                            <filterbar:FilterItem label="VIN" name="Fiori_ListReport_ListReport_0-filterBars-Fiori_ListReport_FilterBar-1-filters-sap_ui_comp_filterbar_FilterItem-1538428831201---0">
                                <filterbar:control>
                                    <Input id="vinFilter" placeholder="Enter VIN ..."/>
                                </filterbar:control>
                            </filterbar:FilterItem>
                            <filterbar:FilterItem label="Model" name="Fiori_ListReport_ListReport_0-filterBars-Fiori_ListReport_FilterBar-1-filters-sap_ui_comp_filterbar_FilterItem-1538428832851---0">
                                <filterbar:control>
               						<Input id="modelFilter" type="Text" textFormatMode="KeyValue" placeholder="Enter Model ..." showSuggestion="true" showValueHelp="true" valueHelpRequest="handleModelValueHelp" suggestionItems="{/ZC_MODEL_YEAR}" suggestionItemSelected="suggestionItemSelected">
										<suggestionItems>
											<core:ListItem key="{model}" text="{model_desc_en}"/>
										</suggestionItems>
									</Input>
                                </filterbar:control>
                            </filterbar:FilterItem>
                            <filterbar:FilterItem label="Model Year" name="Fiori_ListReport_ListReport_0-filterBars-Fiori_ListReport_FilterBar-1-filters-sap_ui_comp_filterbar_FilterItem-1538428836358---0">
                                <filterbar:control>
               						<ComboBox id="yearFilter" change="onSelectChange" items="{YearModel>/}" placeholder="Select Year">
										<core:Item key="{YearModel>dkey}" text="{YearModel>dtext}"/>
									</ComboBox>
                				</filterbar:control>
                            </filterbar:FilterItem>
                             <filterbar:FilterItem label="Reserver" name="Fiori_ListReport_ListReport_0-filterBars-Fiori_ListReport_FilterBar-1-filters-sap_ui_comp_filterbar_FilterItem-1538428832855---0">
                                <filterbar:control>
                                		<Input id="Reserver" placeholder="Enter Reserver ..."/>
                                </filterbar:control>
                            </filterbar:FilterItem>
                        </filterbar:filterItems>
                    </filterbar:FilterBar>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
                    <Table id="tabRservation" items="{ path: '/reservationListSet' , sorter : { path : 'VHVIN', group : true}}" updateFinished="onUpdateFinished" includeItemInSelection="true" fixedLayout="false" growing="true" growingThreshold="12" growingScrollToLoad="false">
                        <headerToolbar>
                            <OverflowToolbar design="Transparent">
                                <content>
                                    <Title textAlign="Begin" id="tabTitle"/>
                                    <!--<Title text="(1)"/>-->
                                    <ToolbarSpacer/>
                                    <Button icon="sap-icon://excel-attachment" type="Emphasized" press="handleExcelPressed">
                                        <layoutData>
                                            <OverflowToolbarLayoutData/>
                                        </layoutData>
                                    </Button>
                                </content>
                            </OverflowToolbar>
                        </headerToolbar>
                        <columns>
                            <Column width="auto" minScreenWidth="Phone">
                                <header>
                                    <Text text="Status" width="auto"/>
                                </header>
                            </Column>
                            <Column width="auto" minScreenWidth="Phone">
                                <header>
                                    <Text text="Model" width="auto"/>
                                </header>
                            </Column>
                            <Column width="auto" minScreenWidth="Phone">
                                <header>
                                    <Text text="Model Year" width="auto"/>
                                </header>
                            </Column>
                            <Column width="auto" minScreenWidth="Phone">
                                <header>
                                    <Text text="Colour" width="auto"/>
                                </header>
                            </Column>
                            <Column width="auto" minScreenWidth="Phone">
                                <header>
                                    <Text text="Request Date" width="auto"/>
                                </header>
                            </Column>
                            <Column width="auto" minScreenWidth="Phone">
                                <header>
                                    <Text text="Reserver" width="auto"/>
                                </header>
                            </Column>
                            <Column width="auto" minScreenWidth="Phone">
                                <header>
                                    <Text text="VIN" width="auto"/>
                                </header>
                            </Column>
                            <Column width="auto" minScreenWidth="Phone">
                                <header>
                                    <Text text="Purchaser" width="auto"/>
                                </header>
                            </Column>
                            <Column width="auto" minScreenWidth="Phone">
                                <header>
                                    <Text text="Driver" width="auto"/>
                                </header>
                            </Column>
                            <Column width="auto" minScreenWidth="Phone">
                                <header>
                                    <Text text="Assoc. Price" width="auto"/>
                                </header>
                            </Column>
                            <Column width="auto" minScreenWidth="Phone">
                                <header>
                                    <Text text="Est.End Date" width="auto"/>
                                </header>
                            </Column>
                            <Column minScreenWidth="Phone">
                                <header>
                                    <Text text=""/>
                                </header>
                            </Column>
                            <Column width="5%" visible="{UserModel>/admin}"/>
                            <Column width="5%" visible="{UserModel>/admin}"/>
                        </columns>
                        <items>
                            <ColumnListItem selected="true" type="Active">
                                <cells>
                                    <Text text="{Status}" width="auto"/>
                                    <Text text="{ModelDesc}" width="auto"/>
                                    <Text text="{ZZMOYR}" width="auto"/>
                                    <Text text="{ColorDesc}" width="auto"/>
                                    <Text text="{RequestDate}" width="auto"/>
                                    <Text text="{Reserver}" width="auto"/>
                                    <Text text="{VHVIN}" width="auto"/>
                                    <Text text="{Purchaser}" width="auto"/>
                                    <Text text="{Driver}" width="auto"/>
                                    <Text text="{Price}" width="auto"/>
                                    <Text text="{EndDate}" width="auto"/>
                                    <Button icon="sap-icon://hint" press="onReservationInfoPress"/>
                                    <Button text="Approve" press="onApprovePress" visible="{= ${StatusCode} === 'PA' || ${StatusCode} === 'WL'}"/>
                                    <Button text="Reject" press="onRejectPress" visible="{= ${StatusCode} === 'AP' || ${StatusCode} === 'PA' || ${StatusCode} === 'WL'}"/>
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
         </f:content>
        <f:footer>
            <OverflowToolbar>
                <content>
                    <ToolbarSpacer/>
                    <Button text="Save" type="Emphasized" iconFirst="true" width="auto" enabled="true" visible="true" iconDensityAware="false"/>
                    <Button text="Cancel" type="Default" iconFirst="true" width="auto" enabled="true" visible="true" iconDensityAware="false"/>
                </content>
            </OverflowToolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>